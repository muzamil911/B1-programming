import os

def interactive_file_manager():
    folder_name = "lab_files"
    
    # Setup: Ensure the folder exists first
    if not os.path.exists(folder_name):
        os.makedirs(folder_name)
        print(f"--- System: Created base directory '{folder_name}' ---")

    while True:
        print(f"\nFILE MANAGER: Current Folder [{folder_name}]")
        print("1. Create a new file")
        print("2. Rename a file")
        print("3. Delete a file")
        print("4. List all files")
        print("5. Exit & Cleanup (Deletes Folder)")
        
        choice = input("\nSelect an option: ")

        # 1. CREATE FILE
        if choice == '1':
            filename = input("Enter name for new file (e.g., test.txt): ")
            path = os.path.join(folder_name, filename)
            with open(path, 'w') as f:
                f.write("New lab file created.")
            print(f"SUCCESS: Created {path}")

        # 2. RENAME FILE
        elif choice == '2':
            old_name = input("Enter the current filename: ")
            old_path = os.path.join(folder_name, old_name)
            
            if os.path.exists(old_path):
                new_name = input("Enter the new filename: ")
                new_path = os.path.join(folder_name, new_name)
                os.rename(old_path, new_path)
                print(f"SUCCESS: Renamed to {new_name}")
            else:
                print("ERROR: File not found.")

        # 3. DELETE FILE
        elif choice == '3':
            filename = input("Enter filename to delete: ")
            path = os.path.join(folder_name, filename)
            
            if os.path.exists(path):
                os.remove(path)
                print(f"SUCCESS: Deleted {filename}")
            else:
                print("ERROR: File not found.")

        # 4. LIST FILES
        elif choice == '4':
            print(f"\nContents of {folder_name}:")
            files = os.listdir(folder_name)
            if not files:
                print("[Folder is empty]")
            else:
                for f in files:
                    print(f" - {f}")

        # 5. EXIT & CLEANUP
        elif choice == '5':
            # Requirement: Clean up by removing all files and folder
            confirm = input("Are you sure? This will delete the folder and everything in it! (y/n): ")
            if confirm.lower() == 'y':
                for f in os.listdir(folder_name):
                    os.remove(os.path.join(folder_name, f))
                os.rmdir(folder_name)
                print("Folder cleaned up. Goodbye!")
                break
        else:
            print("Invalid selection.")

if __name__ == "__main__":
    # Display CWD before starting as per requirements
    print(f"Current Working Directory: {os.getcwd()}")
    interactive_file_manager()